"use strict";var isObject=require("../isObject"),isPlain=require("../isPlainObject");function set(r,e,t,i){if(!isObject(r))return r;var s=i||{},n=Array.isArray(e);if(!n&&"string"!=typeof e)return r;var a=s.merge;a&&"function"!=typeof a&&(a=Object.assign);var o=(n?e:split(e,s)).filter(isValidKey),u=o.length,l=r;if(!i&&1===o.length)return result(r,o[0],t,a),r;for(var c=0;c<u;c++){var f=o[c];if(isObject(r[f])||(r[f]={}),c===u-1){result(r,f,t,a);break}r=r[f]}return l}function result(r,e,t,i){i&&isPlain(r[e])&&isPlain(t)?r[e]=i({},r[e],t):r[e]=t}function split(r,e){var t=createKey(r,e);if(set.memo[t])return set.memo[t];var i=e&&e.separator?e.separator:".",s=[],n=[];s=e&&"function"==typeof e.split?e.split(r):r.split(i);for(var a=0;a<s.length;a++){for(var o=s[a];o&&"\\"===o.slice(-1)&&s[a+1];)o=o.slice(0,-1)+i+s[++a];n.push(o)}return set.memo[t]=n}function createKey(r,e){var t=r;if(void 0===e)return t+"";for(var i=Object.keys(e),s=0;s<i.length;s++){var n=i[s];t+=";"+n+"="+String(e[n])}return t}function isValidKey(r){return"__proto__"!==r&&"constructor"!==r&&"prototype"!==r}set.memo={},module.exports=set;
